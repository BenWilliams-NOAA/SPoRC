% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Simulate_Population.R
\name{simulation_self_test}
\alias{simulation_self_test}
\title{Conduct a Simulation Self Test}
\usage{
simulation_self_test(
  data,
  parameters,
  mapping,
  random,
  rep,
  sd_rep,
  n_sims,
  newton_loops = 3,
  do_sdrep = FALSE,
  do_par = FALSE,
  n_cores = NULL,
  output_path = NULL,
  what = c("SSB", "Rec")
)
}
\arguments{
\item{data}{A list containing model data from an RTMB object.}

\item{parameters}{A list of fitted parameter values from an RTMB object.}

\item{mapping}{A list specifying parameter mappings from an RTMB object.}

\item{random}{Character vector specifying random effects.}

\item{rep}{A list of report values from an RTMB object (`$rep`).}

\item{sd_rep}{An `sdreport` object from RTMB summarizing parameter uncertainty.}

\item{n_sims}{Integer. Number of simulation replicates to run.}

\item{newton_loops}{Integer. Number of Newton loops used in model fitting (default: `3`).}

\item{do_sdrep}{Logical. If `TRUE`, compute `sdreport` for each fitted replicate (default: `FALSE`).}

\item{do_par}{Logical. If `TRUE`, run simulations in parallel (default: `FALSE`).}

\item{n_cores}{Integer. Number of cores to use for parallelization (default: `NULL` = detect automatically).}

\item{output_path}{Optional file path. If provided, the simulated datasets are written to this location.}

\item{what}{Character vector. Names of report elements in `rep` to extract and store for each replicate.}
}
\value{
A list with elements corresponding to the requested `what` values, each containing
an array of simulation results across replicates. If `do_sdrep = TRUE`, an additional
element `"sd_rep"` is included with the list of `sdreport` objects (or `NA` if a replicate fails).
}
\description{
This function runs a self test of the fitted RTMB model by simulating new
datasets under the fitted parameters, refitting the model, and comparing
estimated outputs to the true values used for simulation. It can be run
sequentially or in parallel.
}
\examples{
\dontrun{
# Run a simple self test with 10 simulations, extracting SSB
res <- simulation_self_test(
  data = model$data,
  parameters = model$parameters,
  mapping = model$mapping,
  random = model$random,
  rep = model$rep,
  sd_rep = model$sd_rep,
  n_sims = 10,
  what = "SSB"
)

str(res$SSB) # look at simulated SSB arrays
}
}
\seealso{
Other Simulation Setup: 
\code{\link{Setup_Sim_Biologicals}()},
\code{\link{Setup_Sim_Containers}()},
\code{\link{Setup_Sim_Dim}()},
\code{\link{Setup_Sim_Fishing}()},
\code{\link{Setup_Sim_Rec}()},
\code{\link{Setup_Sim_Survey}()},
\code{\link{Setup_Sim_Tagging}()},
\code{\link{Setup_sim_env}()},
\code{\link{Simulate_Pop_Static}()},
\code{\link{run_annual_cycle}()},
\code{\link{simulation_data_to_SPoRC}()}
}
\concept{Simulation Setup}
