<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Defining Priors • SPoRC</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Defining Priors">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SPoRC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Defining Priors</h1>
            
      

      <div class="d-none name"><code>k_defining_priors.Rmd</code></div>
    </div>

    
    
<p>In some cases, prior information might be available for use to inform
model estimation. Priors can either serve as informative priors that
have a strong influence on model estimation (e.g., natural mortality,
catchability), but can also serve as regularizing priors that help
stabilize model estimation. These regularizing priors can be helpful
particularly for stabalizing tag reporting, movement, and selectivity
parameters because some parameters are not well informed by data (e.g.,
slope of selectivity when it approaches infinity) such that the gradient
is zero, with respect to the likelihood surface.</p>
<p>In <code>SPoRC</code>, priors can be placed on several parameters.
These include:</p>
<ol style="list-style-type: decimal">
<li>Steepness,</li>
<li>Natural Mortality,</li>
<li>Catchability,</li>
<li>Selectivity,</li>
<li>Movement,</li>
<li>Tag Reporting Rates, and</li>
<li>Recruitment Proportions</li>
</ol>
<p>In the following, we will demonstrate how priors can be specified for
each of these parameters. For further mathematical details on the
formulation of these priors, refer to the vignette describing model
equations.</p>
<p>Let us first load in any required packages, data we may use, and
define model dimensions.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load in packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://chengmatt.github.io/SPoRC">SPoRC</a></span><span class="op">)</span> </span>
<span><span class="co">#&gt; Loading required package: RTMB</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sgl_rg_sable_data"</span><span class="op">)</span> <span class="co"># load in data</span></span>
<span></span>
<span><span class="co"># Define model dimensions</span></span>
<span><span class="va">input_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Setup_Mod_Dim.html">Setup_Mod_Dim</a></span><span class="op">(</span>years <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sgl_rg_sable_data</span><span class="op">$</span><span class="va">years</span><span class="op">)</span>, <span class="co"># vector of years </span></span>
<span>                            <span class="co"># (corresponds to year 1960 - 2024)</span></span>
<span>                            ages <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sgl_rg_sable_data</span><span class="op">$</span><span class="va">ages</span><span class="op">)</span>, <span class="co"># vector of ages</span></span>
<span>                            lens <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">41</span>,<span class="fl">99</span>,<span class="fl">2</span><span class="op">)</span>, <span class="co"># number of lengths</span></span>
<span>                            n_regions <span class="op">=</span> <span class="fl">1</span>, <span class="co"># number of regions</span></span>
<span>                            n_sexes <span class="op">=</span> <span class="va">sgl_rg_sable_data</span><span class="op">$</span><span class="va">n_sexes</span>, <span class="co"># number of sexes == 1,</span></span>
<span>                            <span class="co"># female, == 2 male</span></span>
<span>                            n_fish_fleets <span class="op">=</span> <span class="va">sgl_rg_sable_data</span><span class="op">$</span><span class="va">n_fish_fleets</span>, <span class="co"># number of fishery</span></span>
<span>                            <span class="co"># fleet == 1, fixed gear, == 2 trawl gear</span></span>
<span>                            n_srv_fleets <span class="op">=</span> <span class="va">sgl_rg_sable_data</span><span class="op">$</span><span class="va">n_srv_fleets</span>, <span class="co"># number of survey fleets</span></span>
<span>                            verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>                            <span class="op">)</span></span>
<span><span class="co">#&gt; Number of Years: 65</span></span>
<span><span class="co">#&gt; Number of Projection Years for Dev Pars: 0</span></span>
<span><span class="co">#&gt; Number of Regions: 1</span></span>
<span><span class="co">#&gt; Number of Age Bins: 30</span></span>
<span><span class="co">#&gt; Number of Length Bins: 30</span></span>
<span><span class="co">#&gt; Number of Sexes: 2</span></span>
<span><span class="co">#&gt; Number of Fishery Fleets: 2</span></span>
<span><span class="co">#&gt; Number of Survey Fleets: 3</span></span></code></pre></div>
<div class="section level2">
<h2 id="steepness">Steepness<a class="anchor" aria-label="anchor" href="#steepness"></a>
</h2>
<p>To specify priors on the steepness of a Beverton-Holt
stock-recruitment relationship, we use the <code>Setup_Mod_Rec</code>
function with default settings for simplicity. First, we define a
dataframe that includes the region where the prior applies, the mean
(<code>mu</code>), and standard deviation (<code>sd</code>) of the
steepness prior. These values are specified in normal space but are
internally transformed to a beta distribution bounded between 0.2 and 1.
To activate steepness priors, set <code>Use_h_prior = 1</code> and
provide the dataframe to the <code>h_prior</code> argument:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set up dataframe specifying the steepness prior and the dimensions it is applied to</span></span>
<span><span class="va">steepness_prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  region <span class="op">=</span> <span class="fl">1</span>, <span class="co"># apply steepness prior to region 1</span></span>
<span>  mu <span class="op">=</span> <span class="fl">0.6</span>, <span class="co"># mean of steepness</span></span>
<span>  sd <span class="op">=</span> <span class="fl">0.2</span> <span class="co"># sd of steepness</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># setup recruitment options</span></span>
<span><span class="va">input_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Setup_Mod_Rec.html">Setup_Mod_Rec</a></span><span class="op">(</span></span>
<span>  input_list <span class="op">=</span> <span class="va">input_list</span>,        <span class="co"># input data list from above</span></span>
<span>  <span class="co"># Model options</span></span>
<span>  rec_model <span class="op">=</span> <span class="st">"bh_rec"</span>,          <span class="co"># recruitment model type</span></span>
<span>  Use_h_prior <span class="op">=</span> <span class="fl">1</span>,               <span class="co"># whether steepness priors are used</span></span>
<span>  h_prior <span class="op">=</span> <span class="va">steepness_prior</span>      <span class="co"># Steepness prior dataframe</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Recruitment is specified as: bh_rec</span></span>
<span><span class="co">#&gt; Recruitment and SSB lag is specified as: 1</span></span>
<span><span class="co">#&gt; Recruitment proportion priors are: Not Used</span></span>
<span><span class="co">#&gt; Steepness priors are: Used</span></span>
<span><span class="co">#&gt; Sex Ratios estimated with 1 block for region 1</span></span>
<span><span class="co">#&gt; Recruitment Bias Ramp is: Off</span></span>
<span><span class="co">#&gt; Initial Age Structure is: Iterated</span></span>
<span><span class="co">#&gt; Recruitment deviations for every year are estimated</span></span>
<span><span class="co">#&gt; Recruitment Variability is estimated for both early and late periods</span></span>
<span><span class="co">#&gt; Initial Age Deviations is stochastic for all ages, but the plus group follows equilibrium calculations.</span></span>
<span><span class="co">#&gt; Recruitment Deviations is estimated for all dimensions</span></span>
<span><span class="co">#&gt; Steepness is estimated for all dimensions</span></span>
<span><span class="co">#&gt; Sex ratio is specified as: fix</span></span></code></pre></div>
<p>In a spatial model where region-specific steepness priors are
required, the prior dataframe can include multiple entries. In
particular, each row corresponds to a region-specific steepness
parameter, along with its associated mean (<code>mu</code>) and standard
deviation (<code>sd</code>). For instance:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">steepness_prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>, <span class="co"># apply steepness prior to region 1, 2 and, 3</span></span>
<span>  mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.6</span>, <span class="fl">0.8</span>, <span class="fl">0.3</span><span class="op">)</span>, <span class="co"># mean of steepness prior corresponding to the regions defined</span></span>
<span>  sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">)</span> <span class="co"># sd of steepness corresponding to the regions defined</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">steepness_prior</span></span>
<span><span class="co">#&gt;   region  mu  sd</span></span>
<span><span class="co">#&gt; 1      1 0.6 0.2</span></span>
<span><span class="co">#&gt; 2      2 0.8 0.2</span></span>
<span><span class="co">#&gt; 3      3 0.3 0.2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="natural-mortality">Natural Mortality<a class="anchor" aria-label="anchor" href="#natural-mortality"></a>
</h2>
<p>To define natural mortality priors, we use the
<code>Setup_Mod_Biologicals</code> function to specify a natural
mortality prior. To do so, we will set <code>Use_M_prior = 1</code> and
provide a dataframe of values corresponding the region, year, age, and
sex blocks specified for natural mortality, along with their associated
mean and standard deviation.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define natural mortality prior</span></span>
<span><span class="va">M_prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span> </span>
<span>  regionblk <span class="op">=</span> <span class="fl">1</span>, <span class="co"># region block</span></span>
<span>  yearblk <span class="op">=</span> <span class="fl">1</span>, <span class="co"># year block</span></span>
<span>  ageblk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="co"># age block</span></span>
<span>  sexblk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, <span class="co"># sex block</span></span>
<span>  mu <span class="op">=</span> <span class="fl">0.085</span>, <span class="co"># mean</span></span>
<span>  sd <span class="op">=</span> <span class="fl">0.1</span> <span class="co">#sd</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">input_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Setup_Mod_Biologicals.html">Setup_Mod_Biologicals</a></span><span class="op">(</span>input_list <span class="op">=</span> <span class="va">input_list</span>,</span>
<span>                                    <span class="co"># Data inputs</span></span>
<span>                                    WAA <span class="op">=</span> <span class="va">sgl_rg_sable_data</span><span class="op">$</span><span class="va">WAA</span>, <span class="co"># weight-at-age</span></span>
<span>                                    MatAA <span class="op">=</span> <span class="va">sgl_rg_sable_data</span><span class="op">$</span><span class="va">MatAA</span>, <span class="co"># maturity at age</span></span>
<span>                                    AgeingError <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">sgl_rg_sable_data</span><span class="op">$</span><span class="va">age_error</span><span class="op">)</span>, <span class="co"># ageing error</span></span>
<span>                                    SizeAgeTrans <span class="op">=</span> <span class="va">sgl_rg_sable_data</span><span class="op">$</span><span class="va">SizeAgeTrans</span>, <span class="co"># size age transition matrix</span></span>
<span>                                    <span class="co"># Model options</span></span>
<span>                                    Use_M_prior <span class="op">=</span> <span class="fl">1</span>, <span class="co"># use natural mortality prior</span></span>
<span>                                    M_prior <span class="op">=</span> <span class="va">M_prior</span>, <span class="co"># mean and sd for M prior</span></span>
<span>                                    M_spec <span class="op">=</span> <span class="st">"est_ln_M"</span>, <span class="co"># estmating M</span></span>
<span>                                    M_sexblk_spec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span> <span class="co"># specifying M as sex-specific</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Length Composition data are: Not Used</span></span>
<span><span class="co">#&gt; Natural Mortality priors are: Used</span></span>
<span><span class="co">#&gt; Selectivity is aged-based.</span></span>
<span><span class="co">#&gt; WAA_fish was specified at NULL. Using the spawning WAA for WAA_fish</span></span>
<span><span class="co">#&gt; WAA_srv was specified at NULL. Using the spawning WAA for WAA_srv</span></span>
<span><span class="co">#&gt; Ageing Error is specified to be time-invariant</span></span>
<span><span class="co">#&gt; Natural Mortality specified as: est_ln_M</span></span>
<span><span class="co">#&gt; Natural Mortality Region Blocks is specified as: 1</span></span>
<span><span class="co">#&gt; Natural Mortality Year Blocks is specified as: 1</span></span>
<span><span class="co">#&gt; Natural Mortality Age Blocks is specified as: 1</span></span>
<span><span class="co">#&gt; Natural Mortality Sex Blocks is specified as: 2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="catchability">Catchability<a class="anchor" aria-label="anchor" href="#catchability"></a>
</h2>
<p>Defining catchability priors for the fishery and survey follows the
same process. For demonstration purposes, the following section will
illustrate how catchability priors can be defined for the survey using
the <code>Setup_Mod_Srvsel_and_Q</code> function. Similar to the
steepness section, a dataframe of catchability priors is first defined
that determines the region, fleet, and block the catchability prior is
applied to. The dataframe also includes columns defining the the mean
(<code>mu</code>), and standard deviation (<code>sd</code>) of the
catchability prior. Again, these priors are provided in normal space,
but are internally transformed to be a lognormal density. The
<code>Use_srv_q_prior = 1</code> argument is utilized to activate the
prior, and the dataframe is provided to the <code>srv_q_prior</code>
argument.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set up dataframe specifying the survey catchability prior and the dimensions it is applied to</span></span>
<span><span class="va">srv_q_prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  region <span class="op">=</span> <span class="fl">1</span>, <span class="co"># apply catchability prior to region 1</span></span>
<span>  fleet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="co"># apply catchability prior to region 1, fleets 1 - 3</span></span>
<span>  block <span class="op">=</span> <span class="fl">1</span>, <span class="co"># apply catchability prior to region 1, fleets 1 - 3, block 1</span></span>
<span>  mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">0.5</span>, <span class="fl">4</span><span class="op">)</span>, <span class="co"># corresponding mean catchability prior values</span></span>
<span>  sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.35</span>, <span class="fl">0.1</span><span class="op">)</span> <span class="co"># corresponding standard deviation prior values</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">srv_q_prior</span></span>
<span><span class="co">#&gt;   region fleet block  mu   sd</span></span>
<span><span class="co">#&gt; 1      1     1     1 6.0 0.10</span></span>
<span><span class="co">#&gt; 2      1     2     1 0.5 0.35</span></span>
<span><span class="co">#&gt; 3      1     3     1 4.0 0.10</span></span>
<span></span>
<span><span class="co"># Setup survey selectivity and catchability</span></span>
<span><span class="va">input_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Setup_Mod_Srvsel_and_Q.html">Setup_Mod_Srvsel_and_Q</a></span><span class="op">(</span>input_list <span class="op">=</span> <span class="va">input_list</span>,</span>
<span></span>
<span>                                     <span class="co"># Model options</span></span>
<span>                                     <span class="co"># survey selectivity, whether continuous time-varying</span></span>
<span>                                     cont_tv_srv_sel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none_Fleet_1"</span>, <span class="st">"none_Fleet_2"</span>, <span class="st">"none_Fleet_3"</span><span class="op">)</span>,</span>
<span>                                     <span class="co"># survey selectivity blocks</span></span>
<span>                                     srv_sel_blocks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none_Fleet_1"</span>, <span class="st">"none_Fleet_2"</span>, <span class="st">"none_Fleet_3"</span><span class="op">)</span>, </span>
<span>                                     <span class="co"># survey selectivity form</span></span>
<span>                                     srv_sel_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"logist1_Fleet_1"</span>, <span class="st">"exponential_Fleet_2"</span>, <span class="st">"logist1_Fleet_3"</span><span class="op">)</span>,</span>
<span>                                     <span class="co"># survey catchability blocks</span></span>
<span>                                     srv_q_blocks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none_Fleet_1"</span>, <span class="st">"none_Fleet_2"</span>, <span class="st">"none_Fleet_3"</span><span class="op">)</span>,</span>
<span>                                     <span class="co"># whether to estiamte all fixed effects for survey selectivity</span></span>
<span>                                     srv_fixed_sel_pars_spec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"est_all"</span>, <span class="st">"est_all"</span>, <span class="st">"est_all"</span><span class="op">)</span>,</span>
<span>                                     <span class="co"># whether to estiamte all fixed effects for survey catchability</span></span>
<span>                                     srv_q_spec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"est_all"</span>, <span class="st">"est_all"</span>, <span class="st">"est_all"</span><span class="op">)</span>,</span>
<span>                                     <span class="co"># Using catchability priors</span></span>
<span>                                     Use_srv_q_prior <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                     <span class="co"># Input survey catchability prior dataframe</span></span>
<span>                                     srv_q_prior <span class="op">=</span> <span class="va">srv_q_prior</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Survey Catchability priors are: Used</span></span>
<span><span class="co">#&gt; Survey Selectivity priors are: Not Used</span></span>
<span><span class="co">#&gt; Continuous survey time-varying selectivity specified as: none for survey fleet 1</span></span>
<span><span class="co">#&gt; Continuous survey time-varying selectivity specified as: none for survey fleet 2</span></span>
<span><span class="co">#&gt; Continuous survey time-varying selectivity specified as: none for survey fleet 3</span></span>
<span><span class="co">#&gt; Survey Selectivity Time Blocks for survey 1 is specified at: 1</span></span>
<span><span class="co">#&gt; Survey Selectivity Time Blocks for survey 2 is specified at: 1</span></span>
<span><span class="co">#&gt; Survey Selectivity Time Blocks for survey 3 is specified at: 1</span></span>
<span><span class="co">#&gt; Survey selectivity functional form specified as:logist1 for srvery fleet 1</span></span>
<span><span class="co">#&gt; Survey selectivity functional form specified as:exponential for srvery fleet 2</span></span>
<span><span class="co">#&gt; Survey selectivity functional form specified as:logist1 for srvery fleet 3</span></span>
<span><span class="co">#&gt; Survey Catchability Time Blocks for survey 1 is specified at: 1</span></span>
<span><span class="co">#&gt; Survey Catchability Time Blocks for survey 2 is specified at: 1</span></span>
<span><span class="co">#&gt; Survey Catchability Time Blocks for survey 3 is specified at: 1</span></span>
<span><span class="co">#&gt; srv_fixed_sel_pars_spec is specified as: est_all for survey fleet 1</span></span>
<span><span class="co">#&gt; srv_fixed_sel_pars_spec is specified as: est_all for survey fleet 2</span></span>
<span><span class="co">#&gt; srv_fixed_sel_pars_spec is specified as: est_all for survey fleet 3</span></span>
<span><span class="co">#&gt; srv_q_spec is specified as: est_all for survey fleet 1</span></span>
<span><span class="co">#&gt; srv_q_spec is specified as: est_all for survey fleet 2</span></span>
<span><span class="co">#&gt; srv_q_spec is specified as: est_all for survey fleet 3</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="selectivity">Selectivity<a class="anchor" aria-label="anchor" href="#selectivity"></a>
</h2>
<p>Defining selectivity priors for the fishery and survey follows the
same process. Here, we will focus on defining selectivity priors for the
survey for brevity, using the <code>Setup_Mod_Srvsel_and_Q</code>
function. We first define a dataframe with the following columns:
<code>region</code>, <code>par</code>, <code>block</code>,
<code>sex</code>, <code>fleet</code>, <code>mu</code>, <code>sd</code>,
which defines the region, parameter, time block, sex, and fleet
combination to apply the prior to. Given the complexity of the number of
selectivity parameters that can be estimated across model partitions
(regions, sexes, blocks, and fleets), users will need to be cautious how
the selectivity prior dataframe is defined to ensure they are correctly
applied. In the following, we will apply priors to the logistic
selectivity parameters for both sexes in fleet 1, and priors to the
power parameter describing exponential selectivity in fleet 2.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">srv_selex_prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  region <span class="op">=</span> <span class="fl">1</span>, <span class="co"># only a single region</span></span>
<span>  par <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>, <span class="co"># parameter to apply prior to</span></span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, <span class="co"># sexes to apply prior to</span></span>
<span>  fleet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>, <span class="co"># fleets to apply prior to</span></span>
<span>  block <span class="op">=</span> <span class="fl">1</span>, <span class="co"># only a single time block</span></span>
<span>  mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6</span><span class="op">)</span>, <span class="co"># mean specified at 0</span></span>
<span>  sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span> <span class="co"># sd specified to be wide for all parameters</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">srv_selex_prior</span></span>
<span><span class="co">#&gt;   region par sex fleet block mu sd</span></span>
<span><span class="co">#&gt; 1      1   1   1     1     1  0  5</span></span>
<span><span class="co">#&gt; 2      1   2   1     1     1  0  5</span></span>
<span><span class="co">#&gt; 3      1   1   2     1     1  0  5</span></span>
<span><span class="co">#&gt; 4      1   2   2     1     1  0  5</span></span>
<span><span class="co">#&gt; 5      1   1   1     2     1  0  5</span></span>
<span><span class="co">#&gt; 6      1   1   2     2     1  0  5</span></span></code></pre></div>
<p>In the example provided above, the first row of the dataframe
indicates that a prior is pplied to region 1, parameter 1, sex 1, fleet
1, and block 1, which corresponds to the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>b</mi><mn>50</mn></msub><annotation encoding="application/x-tex">b_50</annotation></semantics></math>
parameter for logistic selectivity specified for the first survey fleet.
The last row of the datframe indicates that a prior is applied to region
1, parameter 1, sex 2, fleet 2, and block 1, which corresponds to the
male
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ϕ</mi><annotation encoding="application/x-tex">\phi</annotation></semantics></math>
power paramter for exponential selectivity specified for the second
survey fleet.</p>
<p>Next, we can activate selectivity priors by setting
<code>Use_srv_selex_prior = 1</code> and providing the associated
selectivity prior dataframe to <code>srv_selex_prior</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Setup survey selectivity and catchability</span></span>
<span><span class="va">input_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Setup_Mod_Srvsel_and_Q.html">Setup_Mod_Srvsel_and_Q</a></span><span class="op">(</span>input_list <span class="op">=</span> <span class="va">input_list</span>,</span>
<span></span>
<span>                                     <span class="co"># Model options</span></span>
<span>                                     <span class="co"># survey selectivity, whether continuous time-varying</span></span>
<span>                                     cont_tv_srv_sel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none_Fleet_1"</span>, <span class="st">"none_Fleet_2"</span>, <span class="st">"none_Fleet_3"</span><span class="op">)</span>,</span>
<span>                                     <span class="co"># survey selectivity blocks</span></span>
<span>                                     srv_sel_blocks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none_Fleet_1"</span>, <span class="st">"none_Fleet_2"</span>, <span class="st">"none_Fleet_3"</span><span class="op">)</span>, </span>
<span>                                     <span class="co"># survey selectivity form</span></span>
<span>                                     srv_sel_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"logist1_Fleet_1"</span>, <span class="st">"exponential_Fleet_2"</span>, <span class="st">"logist1_Fleet_3"</span><span class="op">)</span>,</span>
<span>                                     <span class="co"># survey catchability blocks</span></span>
<span>                                     srv_q_blocks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none_Fleet_1"</span>, <span class="st">"none_Fleet_2"</span>, <span class="st">"none_Fleet_3"</span><span class="op">)</span>,</span>
<span>                                     <span class="co"># whether to estiamte all fixed effects for survey selectivity</span></span>
<span>                                     srv_fixed_sel_pars_spec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"est_all"</span>, <span class="st">"est_all"</span>, <span class="st">"est_all"</span><span class="op">)</span>,</span>
<span>                                     <span class="co"># whether to estiamte all fixed effects for survey catchability</span></span>
<span>                                     srv_q_spec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"est_all"</span>, <span class="st">"est_all"</span>, <span class="st">"est_all"</span><span class="op">)</span>,</span>
<span>                                     <span class="co"># Using selex priors</span></span>
<span>                                     Use_srv_selex_prior <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                     <span class="co"># Input survey selex priors</span></span>
<span>                                     srv_selex_prior <span class="op">=</span> <span class="va">srv_selex_prior</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Survey Catchability priors are: Not Used</span></span>
<span><span class="co">#&gt; Survey Selectivity priors are: Used</span></span>
<span><span class="co">#&gt; Continuous survey time-varying selectivity specified as: none for survey fleet 1</span></span>
<span><span class="co">#&gt; Continuous survey time-varying selectivity specified as: none for survey fleet 2</span></span>
<span><span class="co">#&gt; Continuous survey time-varying selectivity specified as: none for survey fleet 3</span></span>
<span><span class="co">#&gt; Survey Selectivity Time Blocks for survey 1 is specified at: 1</span></span>
<span><span class="co">#&gt; Survey Selectivity Time Blocks for survey 2 is specified at: 1</span></span>
<span><span class="co">#&gt; Survey Selectivity Time Blocks for survey 3 is specified at: 1</span></span>
<span><span class="co">#&gt; Survey selectivity functional form specified as:logist1 for srvery fleet 1</span></span>
<span><span class="co">#&gt; Survey selectivity functional form specified as:exponential for srvery fleet 2</span></span>
<span><span class="co">#&gt; Survey selectivity functional form specified as:logist1 for srvery fleet 3</span></span>
<span><span class="co">#&gt; Survey Catchability Time Blocks for survey 1 is specified at: 1</span></span>
<span><span class="co">#&gt; Survey Catchability Time Blocks for survey 2 is specified at: 1</span></span>
<span><span class="co">#&gt; Survey Catchability Time Blocks for survey 3 is specified at: 1</span></span>
<span><span class="co">#&gt; srv_fixed_sel_pars_spec is specified as: est_all for survey fleet 1</span></span>
<span><span class="co">#&gt; srv_fixed_sel_pars_spec is specified as: est_all for survey fleet 2</span></span>
<span><span class="co">#&gt; srv_fixed_sel_pars_spec is specified as: est_all for survey fleet 3</span></span>
<span><span class="co">#&gt; srv_q_spec is specified as: est_all for survey fleet 1</span></span>
<span><span class="co">#&gt; srv_q_spec is specified as: est_all for survey fleet 2</span></span>
<span><span class="co">#&gt; srv_q_spec is specified as: est_all for survey fleet 3</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="movement">Movement<a class="anchor" aria-label="anchor" href="#movement"></a>
</h2>
<p>Defining priors for movement, tag reporting rates, and recruitment
proportions (see section below) is best illustrated with setting up a
spatial model. Here, we will load in data from the multi-region
sablefish case study to demonstrate defining priors for these
processes.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mlt_rg_sable_data</span><span class="op">)</span> <span class="co"># load in data</span></span>
<span></span>
<span><span class="co"># Initialize model dimensions and data list</span></span>
<span><span class="va">input_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Setup_Mod_Dim.html">Setup_Mod_Dim</a></span><span class="op">(</span>years <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">mlt_rg_sable_data</span><span class="op">$</span><span class="va">years</span><span class="op">)</span>,</span>
<span>                            <span class="co"># vector of years (1 - 62)</span></span>
<span>                            ages <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">mlt_rg_sable_data</span><span class="op">$</span><span class="va">ages</span><span class="op">)</span>,</span>
<span>                            <span class="co"># vector of ages (1 - 30)</span></span>
<span>                            lens <span class="op">=</span> <span class="va">mlt_rg_sable_data</span><span class="op">$</span><span class="va">lens</span>,</span>
<span>                            <span class="co"># number of lengths (41 - 99)</span></span>
<span>                            n_regions <span class="op">=</span> <span class="va">mlt_rg_sable_data</span><span class="op">$</span><span class="va">n_regions</span>,</span>
<span>                            <span class="co"># number of regions (5)</span></span>
<span>                            n_sexes <span class="op">=</span> <span class="va">mlt_rg_sable_data</span><span class="op">$</span><span class="va">n_sexes</span>,</span>
<span>                            <span class="co"># number of sexes (2)</span></span>
<span>                            n_fish_fleets <span class="op">=</span> <span class="va">mlt_rg_sable_data</span><span class="op">$</span><span class="va">n_fish_fleets</span>,</span>
<span>                            <span class="co"># number of fishery fleet (2)</span></span>
<span>                            n_srv_fleets <span class="op">=</span> <span class="va">mlt_rg_sable_data</span><span class="op">$</span><span class="va">n_srv_fleets</span>,</span>
<span>                            <span class="co"># number of survey fleets (2)</span></span>
<span>                            verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of Years: 62</span></span>
<span><span class="co">#&gt; Number of Projection Years for Dev Pars: 0</span></span>
<span><span class="co">#&gt; Number of Regions: 5</span></span>
<span><span class="co">#&gt; Number of Age Bins: 30</span></span>
<span><span class="co">#&gt; Number of Length Bins: 30</span></span>
<span><span class="co">#&gt; Number of Sexes: 2</span></span>
<span><span class="co">#&gt; Number of Fishery Fleets: 2</span></span>
<span><span class="co">#&gt; Number of Survey Fleets: 2</span></span></code></pre></div>
<p>Because movement parameters are correlated and must sum to 1,
<code>SPoRC</code> uses a Dirichlet prior to model movement
probabilities. To illustrate, we set up the movement specification using
the <code>Setup_Mod_Movement</code> function. Movement priors are
enabled by setting <code>Use_Movement_Prior = 1</code>. The
<code>Movement_prior</code> argument can be provided as a scalar (as in
the example below), a vector, or a fully specified array. A scalar
value, such as 1.5, implies a vague, symmetric Dirichlet prior that
mildly penalizes values near the extremes (i.e., near 0 or 1).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># setting up movement parameterization</span></span>
<span><span class="va">input_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Setup_Mod_Movement.html">Setup_Mod_Movement</a></span><span class="op">(</span>input_list <span class="op">=</span> <span class="va">input_list</span>,</span>
<span>                                 <span class="co"># Model options</span></span>
<span>                                 Movement_ageblk_spec <span class="op">=</span> <span class="st">"constant"</span>,</span>
<span>                                 <span class="co"># estimating movement in 3 age blocks</span></span>
<span>                                 <span class="co"># (ages 1-6, ages 7-15, ages 16-30)</span></span>
<span>                                 Movement_yearblk_spec <span class="op">=</span> <span class="st">"constant"</span>, <span class="co"># time-invariant movement</span></span>
<span>                                 Movement_sexblk_spec <span class="op">=</span> <span class="st">"constant"</span>, <span class="co"># sex-invariant movement</span></span>
<span>                                 Use_Movement_Prior <span class="op">=</span> <span class="fl">1</span>, <span class="co"># priors used for movement</span></span>
<span>                                 Movement_prior <span class="op">=</span> <span class="fl">1.5</span>  <span class="co"># vague prior to penalize movement away from the extremes</span></span>
<span>                                 <span class="op">)</span></span>
<span><span class="co">#&gt; Movement is: Estimated</span></span>
<span><span class="co">#&gt; Movement priors are: Used</span></span>
<span><span class="co">#&gt; Recruits are: Not Moving</span></span>
<span><span class="co">#&gt; Continuous movement specification is: none</span></span>
<span><span class="co">#&gt; Continuous movement process error specification is: none</span></span>
<span><span class="co">#&gt; Movement fixed effect blocks are sex-invariant</span></span>
<span><span class="co">#&gt; Movement fixed effect blocks are time-invariant</span></span>
<span><span class="co">#&gt; Movement fixed effect blocks are age-invariant</span></span></code></pre></div>
<p>If a vector or array is supplied to <code>Movement_prior</code>, it
will be reshaped to match the full set of movement dimensions:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># array(Movement_prior, dim = c(input_list$data$n_regions, input_list$data$n_regions,</span></span>
<span><span class="co">#                               length(input_list$data$years), </span></span>
<span><span class="co">#                               length(input_list$data$ages), </span></span>
<span><span class="co">#                               input_list$data$n_sexes))</span></span></code></pre></div>
<p>It is important to ensure that the shape and values of the prior
align with the structure of the movement parameters being estimated.
Note that priors are only applied to the unique movement parameters.
Thus, if movement is specified as constant across time, age, and sex,
only one prior will be applied, regardless of the dimensionality of the
array provided.</p>
</div>
<div class="section level2">
<h2 id="tag-reporting-rates">Tag Reporting Rates<a class="anchor" aria-label="anchor" href="#tag-reporting-rates"></a>
</h2>
<p>Defining priors for tag reporting rates is done by constructing a
dataframe and passing it to the <code>Setup_Mod_Tagging</code> function.
The dataframe must contain the following columns: <code>region</code>,
<code>block</code>, <code>mu</code>, <code>sd</code>, and
<code>type.</code> These columns define the region and time block the
prior applies to, the mean and standard deviation of the prior
distribution, and the type of beta prior to use. Two prior types are
supported: a symmetric beta prior (<code>type = 0</code>), which
penalizes extreme values near 0 and 1, and a standard beta prior
(<code>type = 1</code>), which allows users to specify both the mean and
standard deviation directly.</p>
<p>In the example below, symmetric beta priors are applied to two time
blocks in region 1. Because the symmetric form does not require a mean,
the <code>mu</code> column is set to NA:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># setup tagging priors</span></span>
<span><span class="va">tag_prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  region <span class="op">=</span> <span class="fl">1</span>,         <span class="co"># apply to region 1</span></span>
<span>  block  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,   <span class="co"># two time blocks</span></span>
<span>  mu     <span class="op">=</span> <span class="cn">NA</span>,        <span class="co"># not needed for symmetric beta</span></span>
<span>  sd     <span class="op">=</span> <span class="fl">5</span>,         <span class="co"># standard deviation</span></span>
<span>  type   <span class="op">=</span> <span class="fl">0</span>          <span class="co"># symmetric beta prior</span></span>
<span><span class="op">)</span></span>
<span><span class="va">tag_prior</span></span>
<span><span class="co">#&gt;   region block mu sd type</span></span>
<span><span class="co">#&gt; 1      1     1 NA  5    0</span></span>
<span><span class="co">#&gt; 2      1     2 NA  5    0</span></span></code></pre></div>
<p>In this example, the first row of the dataframe indicates that a
symmetric beta prior is applied to tag reporting rates in region 1 and
block 1, with a standard deviation of 5. The second row applies the same
prior structure to block 2. Because <code>type = 0</code>, the prior is
symmetric around 0.5 and discourages extreme reporting rate estimates.
If <code>type = 1</code> were used instead, the mu column would need to
be specified with the prior mean. Tag reporting rate priors can then be
applied by setting <code>Use_TagRep_Prior = 1</code> and inputting the
dataframe into the <code>TagRep_Prior</code> argument.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># setting up tagging parameterization</span></span>
<span><span class="va">input_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Setup_Mod_Tagging.html">Setup_Mod_Tagging</a></span><span class="op">(</span>input_list <span class="op">=</span> <span class="va">input_list</span>,</span>
<span>                                UseTagging <span class="op">=</span> <span class="fl">1</span>, <span class="co"># using tagging data</span></span>
<span>                                max_tag_liberty <span class="op">=</span> <span class="fl">15</span>, <span class="co"># maximum number of years to track a cohort</span></span>
<span></span>
<span>                                <span class="co"># Data Inputs</span></span>
<span>                                tag_release_indicator <span class="op">=</span> <span class="va">mlt_rg_sable_data</span><span class="op">$</span><span class="va">tag_release_indicator</span>,</span>
<span>                                Tagged_Fish <span class="op">=</span> <span class="va">mlt_rg_sable_data</span><span class="op">$</span><span class="va">Tagged_Fish</span>, <span class="co"># Released fish</span></span>
<span>                                Obs_Tag_Recap <span class="op">=</span> <span class="va">mlt_rg_sable_data</span><span class="op">$</span><span class="va">Obs_Tag_Recap</span>,</span>
<span></span>
<span>                                <span class="co"># Model options</span></span>
<span>                                Use_TagRep_Prior <span class="op">=</span> <span class="fl">1</span>, <span class="co"># tag reporting rate priors are used</span></span>
<span>                                TagRep_Prior <span class="op">=</span> <span class="va">tag_prior</span>,</span>
<span>                                <span class="co"># sex-specific data when fitting</span></span>
<span>                                Init_Tag_Mort_spec <span class="op">=</span> <span class="st">"fix"</span>, <span class="co"># fixing initial tag mortality</span></span>
<span>                                Tag_Shed_spec <span class="op">=</span> <span class="st">"fix"</span>, <span class="co"># fixing chronic shedding</span></span>
<span>                                TagRep_spec <span class="op">=</span> <span class="st">"est_shared_r"</span>, <span class="co"># tag reporting rates are</span></span>
<span>                                <span class="co"># not region specific</span></span>
<span>                                <span class="co"># Time blocks for tag reporting rates</span></span>
<span>                                Tag_Reporting_blocks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>                                  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Block_1_Year_1-35_Region_"</span>,</span>
<span>                                        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">input_list</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">n_regions</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">''</span><span class="op">)</span>,</span>
<span>                                  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Block_2_Year_36-terminal_Region_"</span>,</span>
<span>                                        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">input_list</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">n_regions</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">''</span><span class="op">)</span></span>
<span>                                <span class="op">)</span>,</span>
<span></span>
<span>                                <span class="co"># Specify starting values or fixing values</span></span>
<span>                                ln_Init_Tag_Mort <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">)</span>, <span class="co"># fixing initial tag mortality</span></span>
<span>                                ln_Tag_Shed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">0.02</span><span class="op">)</span>  <span class="co"># fixing tag shedding</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Tagging priors are used</span></span>
<span><span class="co">#&gt; Tagging data are fit to by pooling across 1 age groups</span></span>
<span><span class="co">#&gt; Tagging data are fit to by pooling across 1 sex groups</span></span>
<span><span class="co">#&gt; Tag Reporting estimated with 2 block for region 1</span></span>
<span><span class="co">#&gt; Tag Reporting estimated with 2 block for region 2</span></span>
<span><span class="co">#&gt; Tag Reporting estimated with 2 block for region 3</span></span>
<span><span class="co">#&gt; Tag Reporting estimated with 2 block for region 4</span></span>
<span><span class="co">#&gt; Tag Reporting estimated with 2 block for region 5</span></span>
<span><span class="co">#&gt; Initial Tag Mortality is specified as: fix</span></span>
<span><span class="co">#&gt; Chronic Tag Shedding is specified as: fix</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="recruitment-proportions">Recruitment Proportions<a class="anchor" aria-label="anchor" href="#recruitment-proportions"></a>
</h2>
<p>In the context of a spatial model, Dirichlet priors can also be
placed on recruitment proportions. This process is relatively
straightforward and uses the <code>Setup_Mod_Rec</code> functions to do
so. In particular, users will need to define whether the prior is being
used by setting <code>Use_Rec_prop_Prior = 1</code>. Following that, a
scalar or vector of (<code>n_regions</code>) can be defined for
<code>Rec_prop_prior</code>. In the case where
<code>Rec_prop_prior</code> is a scalar, a uniform Dirichlet prior will
be applied. If a vector of different values for each region are
provided, then the Dirichlet prior will be applied according to those
concentration parameters.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Setup recruitment stuff (using defaults for other stuff)</span></span>
<span><span class="va">input_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Setup_Mod_Rec.html">Setup_Mod_Rec</a></span><span class="op">(</span>input_list <span class="op">=</span> <span class="va">input_list</span>, <span class="co"># input data list from above</span></span>
<span>                            do_rec_bias_ramp <span class="op">=</span> <span class="fl">0</span>,</span>
<span></span>
<span>                            <span class="co"># Model options</span></span>
<span>                            rec_model <span class="op">=</span> <span class="st">"mean_rec"</span>, <span class="co"># recruitment model</span></span>
<span>                            Use_Rec_prop_Prior <span class="op">=</span> <span class="fl">1</span>, <span class="co"># using recruitment proportion prior</span></span>
<span>                            Rec_prop_prior <span class="op">=</span> <span class="fl">5</span> <span class="co"># prior value for recruitment proportions</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Recruitment is specified as: mean_rec</span></span>
<span><span class="co">#&gt; Recruitment proportion priors are: Used</span></span>
<span><span class="co">#&gt; Sex Ratios estimated with 1 block for region 1</span></span>
<span><span class="co">#&gt; Sex Ratios estimated with 1 block for region 2</span></span>
<span><span class="co">#&gt; Sex Ratios estimated with 1 block for region 3</span></span>
<span><span class="co">#&gt; Sex Ratios estimated with 1 block for region 4</span></span>
<span><span class="co">#&gt; Sex Ratios estimated with 1 block for region 5</span></span>
<span><span class="co">#&gt; Recruitment Bias Ramp is: Off</span></span>
<span><span class="co">#&gt; Initial Age Structure is: Iterated</span></span>
<span><span class="co">#&gt; Recruitment deviations for every year are estimated</span></span>
<span><span class="co">#&gt; Recruitment Variability is estimated for both early and late periods</span></span>
<span><span class="co">#&gt; Initial Age Deviations is stochastic for all ages, but the plus group follows equilibrium calculations.</span></span>
<span><span class="co">#&gt; Recruitment Deviations is estimated for all dimensions</span></span>
<span><span class="co">#&gt; Sex ratio is specified as: fix</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Cheng.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
