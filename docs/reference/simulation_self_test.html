<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Conduct a Simulation Self Test — simulation_self_test • SPoRC</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Conduct a Simulation Self Test — simulation_self_test"><meta name="description" content="This function runs a self test of the fitted RTMB model by simulating new
datasets under the fitted parameters, refitting the model, and comparing
estimated outputs to the true values used for simulation. It can be run
sequentially or in parallel."><meta property="og:description" content="This function runs a self test of the fitted RTMB model by simulating new
datasets under the fitted parameters, refitting the model, and comparing
estimated outputs to the true values used for simulation. It can be run
sequentially or in parallel."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SPoRC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Conduct a Simulation Self Test</h1>

      <div class="d-none name"><code>simulation_self_test.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function runs a self test of the fitted RTMB model by simulating new
datasets under the fitted parameters, refitting the model, and comparing
estimated outputs to the true values used for simulation. It can be run
sequentially or in parallel.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simulation_self_test</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">parameters</span>,</span>
<span>  <span class="va">mapping</span>,</span>
<span>  <span class="va">random</span>,</span>
<span>  <span class="va">rep</span>,</span>
<span>  <span class="va">sd_rep</span>,</span>
<span>  <span class="va">n_sims</span>,</span>
<span>  newton_loops <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  do_sdrep <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  do_par <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SSB"</span>, <span class="st">"Rec"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A list containing model data from an RTMB object.</p></dd>


<dt id="arg-parameters">parameters<a class="anchor" aria-label="anchor" href="#arg-parameters"></a></dt>
<dd><p>A list of fitted parameter values from an RTMB object.</p></dd>


<dt id="arg-mapping">mapping<a class="anchor" aria-label="anchor" href="#arg-mapping"></a></dt>
<dd><p>A list specifying parameter mappings from an RTMB object.</p></dd>


<dt id="arg-random">random<a class="anchor" aria-label="anchor" href="#arg-random"></a></dt>
<dd><p>Character vector specifying random effects.</p></dd>


<dt id="arg-rep">rep<a class="anchor" aria-label="anchor" href="#arg-rep"></a></dt>
<dd><p>A list of report values from an RTMB object (`$rep`).</p></dd>


<dt id="arg-sd-rep">sd_rep<a class="anchor" aria-label="anchor" href="#arg-sd-rep"></a></dt>
<dd><p>An `sdreport` object from RTMB summarizing parameter uncertainty.</p></dd>


<dt id="arg-n-sims">n_sims<a class="anchor" aria-label="anchor" href="#arg-n-sims"></a></dt>
<dd><p>Integer. Number of simulation replicates to run.</p></dd>


<dt id="arg-newton-loops">newton_loops<a class="anchor" aria-label="anchor" href="#arg-newton-loops"></a></dt>
<dd><p>Integer. Number of Newton loops used in model fitting (default: `3`).</p></dd>


<dt id="arg-do-sdrep">do_sdrep<a class="anchor" aria-label="anchor" href="#arg-do-sdrep"></a></dt>
<dd><p>Logical. If `TRUE`, compute `sdreport` for each fitted replicate (default: `FALSE`).</p></dd>


<dt id="arg-do-par">do_par<a class="anchor" aria-label="anchor" href="#arg-do-par"></a></dt>
<dd><p>Logical. If `TRUE`, run simulations in parallel (default: `FALSE`).</p></dd>


<dt id="arg-n-cores">n_cores<a class="anchor" aria-label="anchor" href="#arg-n-cores"></a></dt>
<dd><p>Integer. Number of cores to use for parallelization (default: `NULL` = detect automatically).</p></dd>


<dt id="arg-output-path">output_path<a class="anchor" aria-label="anchor" href="#arg-output-path"></a></dt>
<dd><p>Optional file path. If provided, the simulated datasets are written to this location.</p></dd>


<dt id="arg-what">what<a class="anchor" aria-label="anchor" href="#arg-what"></a></dt>
<dd><p>Character vector. Names of report elements in `rep` to extract and store for each replicate.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with elements corresponding to the requested `what` values, each containing
an array of simulation results across replicates. If `do_sdrep = TRUE`, an additional
element `"sd_rep"` is included with the list of `sdreport` objects (or `NA` if a replicate fails).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Simulation Setup:
<code><a href="Setup_Sim_Biologicals.html">Setup_Sim_Biologicals</a>()</code>,
<code><a href="Setup_Sim_Containers.html">Setup_Sim_Containers</a>()</code>,
<code><a href="Setup_Sim_Dim.html">Setup_Sim_Dim</a>()</code>,
<code><a href="Setup_Sim_Fishing.html">Setup_Sim_Fishing</a>()</code>,
<code><a href="Setup_Sim_Rec.html">Setup_Sim_Rec</a>()</code>,
<code><a href="Setup_Sim_Survey.html">Setup_Sim_Survey</a>()</code>,
<code><a href="Setup_Sim_Tagging.html">Setup_Sim_Tagging</a>()</code>,
<code><a href="Setup_sim_env.html">Setup_sim_env</a>()</code>,
<code><a href="Simulate_Pop_Static.html">Simulate_Pop_Static</a>()</code>,
<code><a href="run_annual_cycle.html">run_annual_cycle</a>()</code>,
<code><a href="simulation_data_to_SPoRC.html">simulation_data_to_SPoRC</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span>
<span><span class="co"># Run a simple self test with 10 simulations, extracting SSB</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">simulation_self_test</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">model</span><span class="op">$</span><span class="va">data</span>,</span>
<span>  parameters <span class="op">=</span> <span class="va">model</span><span class="op">$</span><span class="va">parameters</span>,</span>
<span>  mapping <span class="op">=</span> <span class="va">model</span><span class="op">$</span><span class="va">mapping</span>,</span>
<span>  random <span class="op">=</span> <span class="va">model</span><span class="op">$</span><span class="va">random</span>,</span>
<span>  rep <span class="op">=</span> <span class="va">model</span><span class="op">$</span><span class="va">rep</span>,</span>
<span>  sd_rep <span class="op">=</span> <span class="va">model</span><span class="op">$</span><span class="va">sd_rep</span>,</span>
<span>  n_sims <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"SSB"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">SSB</span><span class="op">)</span> <span class="co"># look at simulated SSB arrays</span></span>
<span><span class="op">}</span> <span class="co"># }</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Cheng.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

